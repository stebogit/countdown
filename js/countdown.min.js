/*! Countdown.js | Copyright (c) 2013 Hugo Giraudel | MIT License */
!function(t){"use strict";t.extend=function(e,n){if(e=e||{},arguments.length>2)for(var s=1;s<arguments.length;s++)t.extend(e,arguments[s]);else for(var o in n)e[o]=n[o];return e};var e=function(e){this.conf=t.extend({dateStart:new Date,dateEnd:new Date((new Date).getTime()+864e5),selector:".timer",msgBefore:"Be ready!",msgAfter:"It's over, sorry folks!",msgPattern:"{days} days, {hours} hours, {minutes} minutes and {seconds} seconds left.",onStart:null,onEnd:null,leadingZeros:!1,initialize:!0},e),this.started=!1,this.selector=document.querySelectorAll(this.conf.selector),this.interval=1e3,this.patterns=[{pattern:"{years}",secs:31536e3},{pattern:"{months}",secs:2628e3},{pattern:"{weeks}",secs:604800},{pattern:"{days}",secs:86400},{pattern:"{hours}",secs:3600},{pattern:"{minutes}",secs:60},{pattern:"{seconds}",secs:1}],this.initialize!==!1&&this.initialize()};e.prototype.initialize=function(){return this.defineInterval(),this.isOver()?this.outOfInterval():void this.run()},e.prototype.seconds=function(t){return t.getTime()/1e3},e.prototype.isStarted=function(){return this.seconds(new Date)>=this.seconds(this.conf.dateStart)},e.prototype.isOver=function(){return this.seconds(new Date)>=this.seconds(this.conf.dateEnd)},e.prototype.run=function(){var e,n=this,s=Math.abs(this.seconds(this.conf.dateEnd)-this.seconds(new Date));this.isStarted()?this.display(s):this.outOfInterval(),e=t.setInterval(function(){s--,s>0?n.isStarted()&&(n.started||(n.callback("start"),n.started=!0),n.display(s)):(t.clearInterval(e),n.outOfInterval(),n.callback("end"))},this.interval)},e.prototype.display=function(t){for(var e="function"==typeof this.conf.msgPattern?this.conf.msgPattern():this.conf.msgPattern,n=e,s=0;s<this.patterns.length;s++){var o=this.patterns[s];if(-1!==e.indexOf(o.pattern)){var r=Math.floor(t/o.secs),i=this.conf.leadingZeros&&9>=r?"0"+r:r;t-=r*o.secs,n=n.replace(o.pattern,i)}}for(var a=0;a<this.selector.length;a++)this.selector[a].innerHTML=n},e.prototype._defaultDisplay=function(t){var e=document.createElement("iframe");e.setAttribute("frameborder",0),e.setAttribute("width",0),e.setAttribute("height",0),document.documentElement.appendChild(e);var n=(e.contentWindow||e.contentDocument).document;n.write(),n.close();var s=n.createElement(t);n.documentElement.appendChild(s);var o=(window.getComputedStyle?getComputedStyle(s,null):s.currentStyle).display;return e.parentNode.removeChild(e),o},e.prototype._showHide=function(t,e){var n=t.getAttribute("data-olddisplay"),s=t.style.display,o=(window.getComputedStyle?getComputedStyle(t,null):t.currentStyle).display;e?(n||"none"!==s||(t.style.display=""),""===t.style.display&&"none"===o&&(n=n||this._defaultDisplay(t.nodeName))):(s&&"none"!==s||"none"!=o)&&t.setAttribute("data-olddisplay","none"==o?s:o),e&&"none"!==t.style.display&&""!==t.style.display||(t.style.display=e?n||"":"none")},e.prototype.show=function(){for(var t=0;t<this.selector.length;t++)this._showHide(this.selector[t],!0)},e.prototype.hide=function(){for(var t=0;t<this.selector.length;t++)this._showHide(this.selector[t])},e.prototype.defineInterval=function(){for(var t=this.patterns.length;t>0;t--){var e=this.patterns[t-1],n="function"==typeof this.conf.msgPattern?this.conf.msgPattern():this.conf.msgPattern;if(-1!==n.indexOf(e.pattern))return void(this.interval=1e3*e.secs)}},e.prototype.outOfInterval=function(){var t;t=new Date<this.conf.dateStart?"function"==typeof this.conf.msgBefore?this.conf.msgBefore():this.conf.msgBefore:"function"==typeof this.conf.msgAfter?this.conf.msgAfter():this.conf.msgAfter;for(var e=0;e<this.selector.length;e++)this.selector[e].innerHTML!==t&&(this.selector[e].innerHTML=t)},e.prototype.callback=function(e){var n=e.capitalize();"function"==typeof this.conf["on"+n]&&this.conf["on"+n](),void 0!==t.jQuery&&t.jQuery(this.conf.selector).trigger("countdown"+n)},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},t.Countdown=e}(window);